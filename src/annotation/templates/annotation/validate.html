{% extends "./base.html" %}
{% load i18n %}
{% load static %}

{% block title %}{% translate "Validate text"  %}{% endblock %}

{% block links %}
<link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
{% endblock %}

{% block header %}
<nav class="navbar navbar-expand-lg bg-body-tertiary">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">
      <img src="{% static 'annotation/assets/svg/edtlr.svg' %}" alt="eDTLR" width="75"/>
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
      </ul>
      <form class="d-flex" role="logout" method="post" action="{% url 'logout' %}">
	{% csrf_token %}
        <button class="btn btn-outline-primary" type="submit">
	  <i class="bi bi-box-arrow-left"></i>
	  {% translate 'Logout' %}
	</button>
      </form>
    </div>
  </div>
</nav>
{% endblock %}

{% block content %}
<main>
<div id="editor-container" class="row">
  <div class="col-md-6">
    <div id="image-container">
      <img id="image" class="figure-img img-fluid rounded"
	   src="{% static 'annotation/data/128.png' %}"/>
    </div>
  </div>
  <div class="col-md-6">
    <div id="editor">
    </div>
  </div>
</div>
<!-- buttons -->
<div id="buttons-row" class="row align-items-end justify-content-start">
  <div class="col-md-4 offset-md-8">
    <div class="d-flex flex-row-reverse bd-highlight">
      <form method="post" action="{% url 'annotation:save' %}">
	{% csrf_token %}
	<input type="hidden" name="contents" value="">
	<button type="submit" id="btn-save-annotation"
		class="btn btn-primary" value="" >
	  <i class="bi bi-save"></i>
	  {% translate 'Save annotation' %}
	</button>
      </form>
      <form method="post" action="{% url 'annotation:mark-valid' %}">
	{% csrf_token %}
	<input type="hidden" name="contents" value="">
	<button type="submit" id="btn-mark-valid"
		class="btn btn-success">
	  <i class="bi bi-check2"></i>
	  {% translate "Mark valid" %}
	</button>
      </form>
    </div>
  </div>
</div>
</main>
{% endblock %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
	integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
	crossorigin="anonymous">
</script>
<!-- Include the Quill library -->
<script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>

<script src="{% static 'annotation/js/validation-flow.js' %}">
</script>
<script>
  let validationFlow = new ValidationFlow('image', 'editor',
					  'btn-save-annotation', 'btn-mark-valid',
					  ['contents']);
  validationFlow.initialize();
</script>
{% endblock %}
